"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{53876:(e,t,r)=>{r.d(t,{DM:()=>i,k8:()=>s,zB:()=>u});var n=r(12551),o=r(61760),a=r(944);function u(e){try{var t=new URL(e),r=(0,n._)(t.pathname.substr(1).split("/"),3),o=r[0],a=r[1],u=r[2];if("spreadsheets"===o&&"d"===a&&u&&t.host.match("google.com"))return!0}catch(e){}return!1}function i(e){var t=new URL(e);return t.pathname=(0,o._)(t.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(t)}var s=function(e){var t=new URL(e),r=new URLSearchParams(t.search);return r.has("format")||r.set("format","csv"),t.search=r.toString(),(0,a.f)(i(t.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},85330:(e,t,r)=>{r.r(t),r.d(t,{combine:()=>p,dateField:()=>d,download:()=>l,downloadGeoJSON:()=>f,toGeoJSON:()=>c});var n=r(48967),o=r(34618),a=r(12551),u=r(65959),i=r(53876),s=r(39526),l=function(){var e=(0,n._)(function(e){return(0,u.YH)(this,function(t){switch(t.label){case 0:return[4,Promise.all([(0,i.k8)(e[0]).then(s.parse)])];case 1:return[2,a._.apply(void 0,[t.sent(),1])[0]]}})});return function(t){return e.apply(this,arguments)}}(),c=function(e){return{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:e}})}},f=function(e){throw Error("!unimplemented")},p=function(e){var t=e.tigerXt,r=e.strava,n=[],a=!0,u=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value,p=f.date,d=function(e){for(;;){var t=r[0],n=null==t?void 0:t.date;if(!n||!t)return console.warn("no strava data, skipping, dropping src point"),null;if(n<e)r.shift();else if(n.getTime()-e.getTime()<6e4)return r.shift(),t;else return console.warn("src > 1 minute away from strava points, dropping src point"),null}}(p);d&&n.push((0,o._)({latitude:d.lat,longitude:d.lon},d,f))}}catch(e){u=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw i}}return c(n)},d="date"},57571:(e,t,r)=>{r.r(t),r.d(t,{combine:()=>u.combine,dateField:()=>u.dateField,download:()=>u.download,downloadGeoJSON:()=>u.downloadGeoJSON,getResources:()=>v,toGeoJSON:()=>u.toGeoJSON});var n={};r.r(n),r.d(n,{getLevels:()=>d});var o=r(34618),a=r(92831),u=r(85330),i=r(61760),s=r(33925),l="isobutylene",c=["#4d0173","#991113","#ff5600","#ffaa00","#feff00","#6fc400","#3aa702"].reverse(),f=["get",l],p=[0,50,100,150,200,250,300].map(function(e,t,r){return[e,r[t+1]||1/0]}),d=function(e){var t=e.isMinMaxDynamicRange,r=e.geojson,n=0,o=1/0,a=-1/0,u=!0,d=!1,h=void 0;try{for(var v,y=r.features[Symbol.iterator]();!(u=(v=y.next()).done);u=!0)(n=v.value.properties[l])>a&&(a=n),n<o&&(o=n)}catch(e){d=!0,h=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw h}}var m=c.length,w=t?(a-o)/m:0,b=t?(0,i._)(Array(m)).map(function(e,t){var r=o+t*w;return[r,r+w]}):p;return{fieldName:l,colors:c,ranges:b,circleCases:b.map((0,s.t3)(f)).flatMap(function(e,t){return[e,c[t]]})}},h=r(39526),v=function(){return(0,a._)((0,o._)({},{download:u,mapbox:n}),{stream:h})}},39526:(e,t,r)=>{r.r(t),r.d(t,{parse:()=>s});var n=r(38362),o=r(48967),a=r(12551),u=r(65959),i=r(944),s=function(){var e=(0,o._)(function(e){var t,r,o,s,l,c,f,p,d,h,v,y,m,w,b,g;return(0,u.YH)(this,function(u){switch(u.label){case 0:t=[],r=!1,o=!1,s=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),c=(0,n._)((0,i.S)(e)),u.label=2;case 2:return[4,c.next()];case 3:if(!(o=!(f=u.sent()).done))return[3,5];if(p=f.value,!r&&p.includes("Date")&&p.includes("Time"))return p.split(","),r=!0,[3,4];if(!r)return[3,4];!((d=p.split(",")).length>=3)||(v=(h=(0,a._)(d,3))[0],y=h[1],m=h[2],w=new Date("".concat(v," ").concat(y," UTC")),b=Number(m),isNaN(w.getTime())||isNaN(b)||t.push({date:w,isobutylene:b})),u.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return g=u.sent(),s=!0,l=g,[3,12];case 7:if(u.trys.push([7,,10,11]),!(o&&null!=c.return))return[3,9];return[4,c.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(s)throw l;return[7];case 11:return[7];case 12:return[2,t]}})});return function(t){return e.apply(this,arguments)}}()},944:(e,t,r)=>{function n(e){this.wrapped=e}function o(e){var t,r;function o(t,r){try{var u=e[t](r),i=u.value,s=i instanceof n;Promise.resolve(s?i.wrapped:i).then(function(e){if(s){o("next",e);return}a(u.done?"return":"normal",e)},function(e){o("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(a,u){var i={key:e,arg:n,resolve:a,reject:u,next:null};r?r=r.next=i:(t=r=i,o(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}r.d(t,{f:()=>i,S:()=>s}),"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)};var a=r(65959),u=r(69152),i=function(e,t){return fetch(e,t).then(function(e){return e.body}).then(function(e){var t=null==e?void 0:e.getReader();return(0,u.V)(t,"missing stream body"),t})};function s(e){return l.apply(this,arguments)}function l(){var e;return e=function(e){var t,r,o,u,i,s,l,c,f,p,d,h,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:t=new TextDecoder,r="",a.label=1;case 1:return[4,new n(e.read())];case 2:if(u=(o=a.sent()).done,i=o.value,!u)return[3,5];if(!r)return[3,4];return[4,r];case 3:a.sent(),a.label=4;case 4:return[3,14];case 5:r+=t.decode(i,{stream:!0}),r=null!==(l=(s=r.split("\n")).pop())&&void 0!==l?l:"",c=!0,f=!1,p=void 0,a.label=6;case 6:a.trys.push([6,11,12,13]),d=s[Symbol.iterator](),a.label=7;case 7:if(c=(h=d.next()).done)return[3,10];return[4,h.value];case 8:a.sent(),a.label=9;case 9:return c=!0,[3,7];case 10:return[3,13];case 11:return v=a.sent(),f=!0,p=v,[3,13];case 12:try{c||null==d.return||d.return()}finally{if(f)throw p}return[7];case 13:return[3,1];case 14:return[2]}})},(l=function(){return new o(e.apply(this,arguments))}).apply(this,arguments)}},69152:(e,t,r)=>{r.d(t,{V:()=>n});function n(e,t){if(null==e)throw Error(t)}},38362:(e,t,r)=>{function n(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new o(t.call(e));r="@@asyncIterator",n="@@iterator"}throw TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(o=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new o(e)}r.d(t,{_:()=>n})}}]);