"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{7709:function(t,r,n){function e(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}n.d(r,{Z:function(){return e}})},3879:function(t,r,n){function e(t){if(null===t||!0===t||!1===t)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}n.d(r,{Z:function(){return e}})},146:function(t,r,n){n.d(r,{Z:function(){return c}});var e=n(1434),o=n(2524),a=n(7617),i=n(7709),u=n(3879);function c(t,r){if((0,i.Z)(2,arguments),!r||"object"!==typeof r)return new Date(NaN);var n=r.years?(0,u.Z)(r.years):0,c=r.months?(0,u.Z)(r.months):0,f=r.weeks?(0,u.Z)(r.weeks):0,l=r.days?(0,u.Z)(r.days):0,s=r.hours?(0,u.Z)(r.hours):0,p=r.minutes?(0,u.Z)(r.minutes):0,d=r.seconds?(0,u.Z)(r.seconds):0,y=(0,a.Z)(t),v=c||n?(0,o.Z)(y,c+12*n):y,m=l||f?(0,e.Z)(v,l+7*f):v,h=p+60*s,g=d+60*h,b=1e3*g,w=new Date(m.getTime()+b);return w}},1434:function(t,r,n){n.d(r,{Z:function(){return i}});var e=n(3879),o=n(7617),a=n(7709);function i(t,r){(0,a.Z)(2,arguments);var n=(0,o.Z)(t),i=(0,e.Z)(r);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},2524:function(t,r,n){n.d(r,{Z:function(){return i}});var e=n(3879),o=n(7617),a=n(7709);function i(t,r){(0,a.Z)(2,arguments);var n=(0,o.Z)(t),i=(0,e.Z)(r);if(isNaN(i))return new Date(NaN);if(!i)return n;var u=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+i+1,0);var f=c.getDate();return u>=f?c:(n.setFullYear(c.getFullYear(),c.getMonth(),u),n)}},7617:function(t,r,n){n.d(r,{Z:function(){return o}});var e=n(7709);function o(t){(0,e.Z)(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||"object"===typeof t&&"[object Date]"===r?new Date(t.getTime()):"number"===typeof t||"[object Number]"===r?new Date(t):("string"!==typeof t&&"[object String]"!==r||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},2454:function(t,r,n){n.d(r,{Ok:function(){return i},Hw:function(){return c},e5:function(){return u}});var e=n(6930);function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){try{var r=new URL(t),n=o(r.pathname.substr(1).split("/"),3),e=n[0],a=n[1],i=n[2];if("spreadsheets"===e&&"d"===a&&i&&r.host.match("google.com"))return!0}catch(u){}return!1}function u(t){var r=new URL(t);return r.pathname=a(r.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(r)}var c=function(t){var r=new URL(t),n=new URLSearchParams(r.search);return n.has("format")||n.set("format","csv"),r.search=n.toString(),function(t,r){return fetch(t,r).then((function(t){return t.body})).then((function(t){var r=null===t||void 0===t?void 0:t.getReader();return(0,e.k)(r,"missing stream body"),r}))}(u(r.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},4849:function(t,r,n){function e(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(r,{q:function(){return o}});var o=function(t){return function(r){var n=e(r,2),o=n[0],a=n[1];return["all",[">=",t,o],["<",t,a]]}}},6368:function(t,r,n){n.r(r),n.d(r,{dateField:function(){return T},download:function(){return x},downloadGeoJSON:function(){return M},getResources:function(){return U},toGeoJSON:function(){return k}});var e={};n.r(e),n.d(e,{parse:function(){return Z}});var o={};n.r(o),n.d(o,{dateField:function(){return T},download:function(){return x},downloadGeoJSON:function(){return M},toGeoJSON:function(){return k}});var a={};n.r(a),n.d(a,{getLevels:function(){return G}});var i=n(4235),u=n.n(i),c=n(146);function f(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l,s;function p(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function d(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function y(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){d(t,r,n[r])}))}return t}function v(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,r){if(null===t||void 0===t)throw Error(r)}var g,b=new Set(m(["Date","Lat","Lng","PM1.0 (\xb5g/m\xb3)","PM2.5 (\xb5g/m\xb3)","t (s)"]).concat(m(["Lat","Lng","t (s)","Relative Humidity (%)"]))),w={Date:"date",Lat:"latitude",Lng:"longitude","t (s)":"counter_t","PM1.0 (\xb5g/m\xb3)":"pm_1_0","PM2.5 (\xb5g/m\xb3)":"pm_2_5","Relative Humidity (%)":"humidity"},O={Date:function(t){return function(t){var r=new Date(t.trim().split(" ").map((function(t,r){if(0===r){var n=f(t.split("/"),3),e=n[0],o=n[1],a=n[2],i=function(t){return 1===t.length?"0".concat(t):t};return"".concat(a,"-").concat(i(e),"-").concat(i(o))}return"T".concat(t,"-07:00")})).join(""));if(isNaN(r.getTime()))throw new Error("invalid date ".concat(r));return 7===r.getTimezoneOffset()/60?r:(0,c.Z)(r,{hours:1})}(t)},Lat:parseFloat,Lng:parseFloat,"t (s)":function(t){return parseInt(t)},"PM1.0 (\xb5g/m\xb3)":parseFloat,"PM2.5 (\xb5g/m\xb3)":parseFloat,"Relative Humidity (%)":parseFloat},N=["a","A","z","Z"],j=(l=Math).min.apply(l,m(N.map((function(t){return t.charCodeAt(0)})))),S=(s=Math).max.apply(s,m(N.map((function(t){return t.charCodeAt(0)})))),A=function(t){var r=t.charCodeAt(0);return j<=r&&r<=S},Z=(g=u().mark((function t(r,n){var e,o,a,i,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0===n?{headerIndiciesByName:{},partial:"",records:[]}:n,t.next=3,r.read();case 3:return o=t.sent,a=o.done,i=o.value,e.partial+="string"===typeof i?i:i?(new TextDecoder).decode(i):"",c=e.partial.split(/\n/g),f=c.length-1,c.forEach((function(t,r){if(f!==r||a){var n=t.split(",").map((function(t){return t.trim()}));if(A(t[0]||""))e.headerIndiciesByName=n.reduce((function(t,r,n){return b.has(r)?y({},t,d({},r,n)):t}),{});else if(""===n[0]);else{var o=Object.entries(e.headerIndiciesByName).reduce((function(t,r){var e=v(r,2),o=e[0],a=e[1];return y({},t,d({},w[o],O[o](n[a])))}),{});h(!Number.isNaN(o.counter_t),"NaN"),h(Number.isFinite(o.counter_t),"t (s) not ok"),e.records[o.counter_t]=y({},e.records[o.counter_t]||{},o),a&&(e.partial="")}}else e.partial=t})),t.abrupt("return",a?e:Z(r,e));case 11:case"end":return t.stop()}}),t)})),function(){var t=this,r=arguments;return new Promise((function(n,e){var o=g.apply(t,r);function a(t){p(o,n,e,a,i,"next",t)}function i(t){p(o,n,e,a,i,"throw",t)}a(void 0)}))}),P=n(2454);function D(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function _(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function E(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){_(t,r,n[r])}))}return t}var x=function(t){return function(){var r=this,n=arguments;return new Promise((function(e,o){var a=t.apply(r,n);function i(t){D(a,e,o,i,u,"next",t)}function u(t){D(a,e,o,i,u,"throw",t)}i(void 0)}))}}(u().mark((function t(r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,P.Hw)(r[0]).then(Z);case 2:return n=t.sent,t.abrupt("return",n.records);case 4:case"end":return t.stop()}}),t)}))),k=function(t){return{type:"FeatureCollection",features:t.map((function(t){var r=t.humidity/100,n=function(t,r){return.0534*t-.0844*r+5.604}(t.pm_2_5,r);return{type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]},properties:E({},t,{pm_2_5:n})}}))}},M=function(t){return x(t).then(k)},T="date",L=n(4849);function F(t){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var I="pm_2_5",R=["#4d0173","#991113","#ff5600","#ffaa00","#feff00","#6fc400","#3aa702"].reverse(),C=["get",I],H=[0,.25,.5,1,2.5,5,20].map((function(t,r,n){return[t,n[r+1]||1/0]})),G=function(t){var r=t.isMinMaxDynamicRange,n=t.geojson,e=0,o=1/0,a=-1/0,i=!0,u=!1,c=void 0;try{for(var f,l=n.features[Symbol.iterator]();!(i=(f=l.next()).done);i=!0){(e=f.value.properties.pm_2_5)>a&&(a=e),e<o&&(o=e)}}catch(y){u=!0,c=y}finally{try{i||null==l.return||l.return()}finally{if(u)throw c}}var s=R.length,p=r?(a-o)/s:0,d=r?F(new Array(s)).map((function(t,r){var n=o+r*p;return[n,n+p]})):H;return{fieldName:I,colors:R,ranges:d,circleCases:d.map((0,L.q)(C)).flatMap((function(t,r){return[t,R[r]]}))}};function J(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var U=function(){return function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){J(t,r,n[r])}))}return t}({},{download:o,mapbox:a},{stream:e})}},6930:function(t,r,n){function e(t,r){if(null===t||void 0===t)throw Error(r)}n.d(r,{k:function(){return e}})}}]);