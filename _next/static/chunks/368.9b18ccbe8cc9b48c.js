"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{2454:function(r,t,n){n.d(t,{Ok:function(){return i},Hw:function(){return c},e5:function(){return u}});var e=n(6930);function o(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(r){return function(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(r){try{var t=new URL(r),n=o(t.pathname.substr(1).split("/"),3),e=n[0],a=n[1],i=n[2];if("spreadsheets"===e&&"d"===a&&i&&t.host.match("google.com"))return!0}catch(u){}return!1}function u(r){var t=new URL(r);return t.pathname=a(t.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(t)}var c=function(r){var t=new URL(r),n=new URLSearchParams(t.search);return n.has("format")||n.set("format","csv"),t.search=n.toString(),function(r,t){return fetch(r,t).then((function(r){return r.body})).then((function(r){var t=null===r||void 0===r?void 0:r.getReader();return(0,e.k)(t,"missing stream body"),t}))}(u(t.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},4849:function(r,t,n){function e(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,{q:function(){return o}});var o=function(r){return function(t){var n=e(t,2),o=n[0],a=n[1];return["all",[">=",r,o],["<",r,a]]}}},6368:function(r,t,n){n.r(t),n.d(t,{dateField:function(){return M},download:function(){return k},downloadGeoJSON:function(){return I},getResources:function(){return U},toGeoJSON:function(){return L}});var e={};n.r(e),n.d(e,{parse:function(){return P}});var o={};n.r(o),n.d(o,{dateField:function(){return M},download:function(){return k},downloadGeoJSON:function(){return I},toGeoJSON:function(){return L}});var a={};n.r(a),n.d(a,{getLevels:function(){return G}});var i=n(4235),u=n.n(i);function c(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f,l;function s(r,t,n,e,o,a,i){try{var u=r[a](i),c=u.value}catch(f){return void n(f)}u.done?t(c):Promise.resolve(c).then(e,o)}function p(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function y(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){p(r,t,n[t])}))}return r}function d(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(r){return function(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(r,t){if(null===r||void 0===r)throw Error(t)}var h,b=new Set(v(["Date","Lat","Lng","PM1.0 (\xb5g/m\xb3)","PM2.5 (\xb5g/m\xb3)","t (s)"]).concat(v(["Lat","Lng","t (s)","Relative Humidity (%)"]))),w={Date:"date",Lat:"latitude",Lng:"longitude","t (s)":"counter_t","PM1.0 (\xb5g/m\xb3)":"pm_1_0","PM2.5 (\xb5g/m\xb3)":"pm_2_5","Relative Humidity (%)":"humidity"},g={Date:function(r){var t=function(r){return r.trim().split(" ").map((function(r,t){if(0===t){var n=c(r.split("/"),3),e=n[0],o=n[1],a=n[2],i=function(r){return 1===r.length?"0".concat(r):r};return"".concat(a,"-").concat(i(e),"-").concat(i(o))}return"T".concat(r,"-08:00")})).join("")}(r),n=new Date(t);if(isNaN(n.getTime()))throw new Error("invalid date ".concat(t));return n},Lat:parseFloat,Lng:parseFloat,"t (s)":function(r){return parseInt(r)},"PM1.0 (\xb5g/m\xb3)":parseFloat,"PM2.5 (\xb5g/m\xb3)":parseFloat,"Relative Humidity (%)":parseFloat},O=["a","A","z","Z"],j=(f=Math).min.apply(f,v(O.map((function(r){return r.charCodeAt(0)})))),A=(l=Math).max.apply(l,v(O.map((function(r){return r.charCodeAt(0)})))),S=function(r){var t=r.charCodeAt(0);return j<=t&&t<=A},P=(h=u().mark((function r(t,n){var e,o,a,i,c,f;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=void 0===n?{headerIndiciesByName:{},partial:"",records:[]}:n,r.next=3,t.read();case 3:return o=r.sent,a=o.done,i=o.value,e.partial+="string"===typeof i?i:i?(new TextDecoder).decode(i):"",c=e.partial.split(/\n/g),f=c.length-1,c.forEach((function(r,t){if(f!==t||a){var n=r.split(",").map((function(r){return r.trim()}));if(S(r[0]||""))e.headerIndiciesByName=n.reduce((function(r,t,n){return b.has(t)?y({},r,p({},t,n)):r}),{});else if(""===n[0]);else{var o=Object.entries(e.headerIndiciesByName).reduce((function(r,t){var e=d(t,2),o=e[0],a=e[1];return y({},r,p({},w[o],g[o](n[a])))}),{});m(!Number.isNaN(o.counter_t),"NaN"),m(Number.isFinite(o.counter_t),"t (s) not ok"),e.records[o.counter_t]=y({},e.records[o.counter_t]||{},o),a&&(e.partial="")}}else e.partial=r})),r.abrupt("return",a?e:P(t,e));case 11:case"end":return r.stop()}}),r)})),function(){var r=this,t=arguments;return new Promise((function(n,e){var o=h.apply(r,t);function a(r){s(o,n,e,a,i,"next",r)}function i(r){s(o,n,e,a,i,"throw",r)}a(void 0)}))}),_=n(2454);function N(r,t,n,e,o,a,i){try{var u=r[a](i),c=u.value}catch(f){return void n(f)}u.done?t(c):Promise.resolve(c).then(e,o)}function x(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function E(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){x(r,t,n[t])}))}return r}var k=function(r){return function(){var t=this,n=arguments;return new Promise((function(e,o){var a=r.apply(t,n);function i(r){N(a,e,o,i,u,"next",r)}function u(r){N(a,e,o,i,u,"throw",r)}i(void 0)}))}}(u().mark((function r(t){var n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,_.Hw)(t[0]).then(P);case 2:return n=r.sent,r.abrupt("return",n.records);case 4:case"end":return r.stop()}}),r)}))),L=function(r){return{type:"FeatureCollection",features:r.map((function(r){var t=r.humidity/100,n=function(r,t){return.0534*r-.0844*t+5.604}(r.pm_2_5,t);return{type:"Feature",geometry:{type:"Point",coordinates:[r.longitude,r.latitude]},properties:E({},r,{pm_2_5:n})}}))}},I=function(r){return k(r).then(L)},M="date",F=n(4849);function R(r){return function(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var T="pm_2_5",D=["#4d0173","#991113","#ff5600","#ffaa00","#feff00","#6fc400","#3aa702"].reverse(),C=["get",T],H=[0,.25,.5,1,2.5,5,20].map((function(r,t,n){return[r,n[t+1]||1/0]})),G=function(r){var t=r.isMinMaxDynamicRange,n=r.geojson,e=0,o=1/0,a=-1/0,i=!0,u=!1,c=void 0;try{for(var f,l=n.features[Symbol.iterator]();!(i=(f=l.next()).done);i=!0){(e=f.value.properties.pm_2_5)>a&&(a=e),e<o&&(o=e)}}catch(d){u=!0,c=d}finally{try{i||null==l.return||l.return()}finally{if(u)throw c}}var s=D.length,p=t?(a-o)/s:0,y=t?R(new Array(s)).map((function(r,t){var n=o+t*p;return[n,n+p]})):H;return{fieldName:T,colors:D,ranges:y,circleCases:y.map((0,F.q)(C)).flatMap((function(r,t){return[r,D[t]]}))}};function J(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var U=function(){return function(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){J(r,t,n[t])}))}return r}({},{download:o,mapbox:a},{stream:e})}},6930:function(r,t,n){function e(r,t){if(null===r||void 0===r)throw Error(t)}n.d(t,{k:function(){return e}})}}]);