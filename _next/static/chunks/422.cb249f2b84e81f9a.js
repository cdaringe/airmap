"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{1988:function(t,r,n){n.d(r,{Ok:function(){return i},Hw:function(){return c},e5:function(){return u}});var e=n(5624);function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){try{var r=new URL(t),n=o(r.pathname.substr(1).split("/"),3),e=n[0],a=n[1],i=n[2];if("spreadsheets"===e&&"d"===a&&i&&r.host.match("google.com"))return!0}catch(u){}return!1}function u(t){var r=new URL(t);return r.pathname=a(r.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(r)}var c=function(t){var r=new URL(t),n=new URLSearchParams(r.search);return n.has("format")||n.set("format","csv"),r.search=n.toString(),function(t,r){return fetch(t,r).then((function(t){return t.body})).then((function(t){var r=null===t||void 0===t?void 0:t.getReader();return(0,e.k)(r,"missing stream body"),r}))}(u(r.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},8677:function(t,r,n){function e(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(r,{q:function(){return o}});var o=function(t){return function(r){var n=e(r,2),o=n[0],a=n[1];return["all",[">=",t,o],["<",t,a]]}}},5205:function(t,r,n){n.d(r,{Q:function(){return d}});var e=n(4235),o=n.n(e);function a(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function i(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function u(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){i(t,r,n[r])}))}return t}var c,f=function(t){return 1e3*parseInt(t)},l=function(t){return parseFloat(t)},s=function(t){return parseFloat(t)},d=(c=o().mark((function t(r,n){var e,a,c,p,y,m;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0===n?{records:[],partial:""}:n,t.next=3,r.read();case 3:return a=t.sent,c=a.done,((p=a.value)||c)&&(e.partial+="string"===typeof p?p:p?(new TextDecoder).decode(p):"",y=e.partial.split(/\n/g),m=y.length-1,y.forEach((function(t,r){if(m!==r||c){var n=t.split(",");e.headerIndiciesByName?(e.records.push({timestamp:f(n[e.headerIndiciesByName.timestamp]),latitude:l(n[e.headerIndiciesByName.latitude]),longitude:s(n[e.headerIndiciesByName.longitude])}),c&&(e.partial="")):e.headerIndiciesByName=n.reduce((function(t,r,n){return u({},t,i({},r.trim(),n))}),{})}else e.partial=t}))),t.abrupt("return",c?e:d(r,e));case 8:case"end":return t.stop()}}),t)})),function(){var t=this,r=arguments;return new Promise((function(n,e){var o=c.apply(t,r);function i(t){a(o,n,e,i,u,"next",t)}function u(t){a(o,n,e,i,u,"throw",t)}i(void 0)}))})},6422:function(t,r,n){n.r(r),n.d(r,{getResources:function(){return T}});var e={};n.r(e),n.d(e,{getLevels:function(){return E}});var o=n(4235),a=n.n(o),i=n(1988),u=n(5624);function c(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function f(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function l(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){f(t,r,n[r])}))}return t}function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d,p=function(t){return parseFloat(t)},y=function(t){return new Date(t.trim().split(" ").map((function(t,r){if(0===r){var n=s(t.split("/"),3),e=n[0],o=n[1],a=n[2],i=function(t){return 1===t.length?"0".concat(t):t};return"".concat(e,"-").concat(i(o),"-").concat(i(a))}return"T".concat(t,".000-07:00")})).join(""))},m=p,v=p,h=(d=a().mark((function t(r,n){var e,o,i,c,s,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0===n?{records:[],partial:""}:n,t.next=3,r.read();case 3:return o=t.sent,i=o.done,((c=o.value)||i)&&(e.partial+="string"===typeof c?c:c?(new TextDecoder).decode(c):"",s=e.partial.split(/\n/g),d=s.length-1,s.forEach((function(t,r){if(d!==r||i){var n=t.split(",");if(e.headerIndiciesByName){var o=n[e.headerIndiciesByName.Time],a=n[e.headerIndiciesByName["2332.27 nm"]],c=n[e.headerIndiciesByName["2745.80 nm"]];(0,u.k)(o,"date missing"),(0,u.k)(c,"2745.80 nm missing"),e.records.push({date:y(o),pm_2_7:v(c),pm_2_3:m(a)}),i&&(e.partial="")}else e.headerIndiciesByName=n.reduce((function(t,r,n){return l({},t,f({},r.trim(),n))}),{})}else e.partial=t}))),t.abrupt("return",i?e:h(r,e));case 8:case"end":return t.stop()}}),t)})),function(){var t=this,r=arguments;return new Promise((function(n,e){var o=d.apply(t,r);function a(t){c(o,n,e,a,i,"next",t)}function i(t){c(o,n,e,a,i,"throw",t)}a(void 0)}))}),b=n(5205);function g(t,r,n,e,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void n(f)}u.done?r(c):Promise.resolve(c).then(e,o)}function w(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function O(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),e.forEach((function(r){w(t,r,n[r])}))}return t}function j(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!r||n.length!==r);e=!0);}catch(c){o=!0,a=c}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=function(t){var r=function(t){return function(){var r=this,n=arguments;return new Promise((function(e,o){var a=t.apply(r,n);function i(t){g(a,e,o,i,u,"next",t)}function u(t){g(a,e,o,i,u,"throw",t)}i(void 0)}))}}(a().mark((function r(n){var e,o,c,f,l,s,d,p,y;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=j(n,2),o=e[0],c=e[1],(0,u.k)(o,""),(0,u.k)(c,""),r.t0=j,r.next=6,Promise.all([(0,i.Hw)(o).then(h),(0,i.Hw)(c).then(b.Q)]);case 6:return r.t1=r.sent,f=(0,r.t0)(r.t1,2),l=f[0],s=l.records,d=f[1],p=d.records,s.length!==p.length&&console.warn("lossy data - measures ".concat(s.length,", positions ").concat(p.length)),y=p.map((function(t){return t.timestamp})),r.abrupt("return",s.reduce((function(r,n){var e=t.closestTo(n.date,y),o=p.find((function(t){return t.timestamp===e.getTime()})),a=O({},n,{latitude:o.latitude,longitude:o.longitude,skip:Math.abs(o.timestamp-n.date.getTime())>6e4});return a.skip||r.push(a),r}),[]));case 15:case"end":return r.stop()}}),r)}))),n=function(t){return{type:"FeatureCollection",features:t.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]},properties:O({},t)}}))}};return{download:r,downloadGeoJSON:function(t){return r(t).then(n)},dateField:"date",toGeoJSON:n}},S=n(8677);function k(t){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=["#6fc400","#feff00","#ffaa00","#ff5600","#991113","#4d0173","black"],A="pm_2_3",I=[0,.25,.5,1,2.5,5,20].map((function(t,r,n){return[t,n[r+1]||1/0]})),N=["get",A],E=function(t){var r=t.isMinMaxDynamicRange,n=t.geojson,e=0,o=1/0,a=-1/0,i=!0,u=!1,c=void 0;try{for(var f,l=n.features[Symbol.iterator]();!(i=(f=l.next()).done);i=!0){(e=f.value.properties.pm_2_7)>a&&(a=e),e<o&&(o=e)}}catch(y){u=!0,c=y}finally{try{i||null==l.return||l.return()}finally{if(u)throw c}}var s=x.length,d=r?(a-o)/s:0,p=r?k(new Array(s)).map((function(t,r){var n=o+r*d;return[n,n+d]})):I;return{circleCases:p.map((0,S.q)(N)).flatMap((function(t,r){return[t,x[r]]})),colors:x,fieldName:A,pm2Ranges:p}},T=function(t){return{download:P(t),mapbox:e}}},5624:function(t,r,n){function e(t,r){if(null===t||void 0===t)throw Error(r)}n.d(r,{k:function(){return e}})}}]);