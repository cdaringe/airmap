"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{53876:(e,t,r)=>{r.d(t,{DM:()=>u,k8:()=>s,zB:()=>i});var n=r(12551),a=r(61760),o=r(944);function i(e){try{var t=new URL(e),r=(0,n._)(t.pathname.substr(1).split("/"),3),a=r[0],o=r[1],i=r[2];if("spreadsheets"===a&&"d"===o&&i&&t.host.match("google.com"))return!0}catch(e){}return!1}function u(e){var t=new URL(e);return t.pathname=(0,a._)(t.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(t)}var s=function(e){var t=new URL(e),r=new URLSearchParams(t.search);return r.has("format")||r.set("format","csv"),t.search=r.toString(),(0,o.f)(u(t.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},38109:(e,t,r)=>{r.r(t),r.d(t,{getResources:()=>w});var n={};r.r(n),r.d(n,{getLevels:()=>y});var a=r(48967),o=r(14952),i=r(34618),u=r(92831),s=r(12551),c=r(65959),l=r(53876),f=r(69152),d=function(){var e,t=(e=(0,a._)(function(e){var t;return(0,c.YH)(this,function(r){switch(r.label){case 0:return t=(0,s._)(e,1)[0],(0,f.V)(t,"missing airmap gps url"),[4,Promise.all([(0,l.k8)(t).then(function(){var e=(0,a._)(function(e){var r,n,a,s,l,d,p=arguments;return(0,c.YH)(this,function(c){switch(c.label){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{records:[],partial:""},[4,e.read()];case 1:return a=(n=c.sent()).done,((s=n.value)||a)&&(r.partial+="string"==typeof s?s:s?new TextDecoder().decode(s):"",d=(l=r.partial.split(/\n/g)).length-1,l.forEach(function(e,t){if(d!==t||a){var n=e.split(",");if(r.headerIndiciesByName){var s=n[r.headerIndiciesByName.latitude],c=n[r.headerIndiciesByName.timestamp],l=n[r.headerIndiciesByName.longitude];(0,f.V)(s,"lat :("),(0,f.V)(l,"long :("),(0,f.V)(c,"timestamp :("),r.records.push({latitude:parseFloat(s),longitude:parseFloat(l),timestamp:new Date(c),_:0}),a&&(r.partial="")}else r.headerIndiciesByName=n.reduce(function(e,t,r){return(0,u._)((0,i._)({},e),(0,o._)({},t.trim(),r))},{})}else r.partial=e})),[2,a?r:t(e,r)]}})});function t(t){return e.apply(this,arguments)}return t}())])];case 1:return[2,s._.apply(void 0,[r.sent(),1])[0].records]}})}),function(t){return e.apply(this,arguments)}),r=function(e){return{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:(0,i._)({},e)}})}};return{download:t,downloadGeoJSON:function(e){return t(e).then(r)},dateField:"date",toGeoJSON:r}},p=r(33925),h=["#6fc400"],v=[[0,2e3]],m=["get","_"],y=function(e){return e.isMinMaxDynamicRange,e.geojson,h.length,{circleCases:v.map((0,p.t3)(m)).flatMap(function(e,t){return[e,h[t]]}),colors:h,fieldName:"_",ranges:v}},w=function(){return{download:d(),mapbox:n}}},944:(e,t,r)=>{function n(e){this.wrapped=e}function a(e){var t,r;function a(t,r){try{var i=e[t](r),u=i.value,s=u instanceof n;Promise.resolve(s?u.wrapped:u).then(function(e){if(s){a("next",e);return}o(i.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){o("throw",e)}}function o(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(o,i){var u={key:e,arg:n,resolve:o,reject:i,next:null};r?r=r.next=u:(t=r=u,a(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}r.d(t,{f:()=>u,S:()=>s}),"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};var o=r(65959),i=r(69152),u=function(e,t){return fetch(e,t).then(function(e){return e.body}).then(function(e){var t=null==e?void 0:e.getReader();return(0,i.V)(t,"missing stream body"),t})};function s(e){return c.apply(this,arguments)}function c(){var e;return e=function(e){var t,r,a,i,u,s,c,l,f,d,p,h,v;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=new TextDecoder,r="",o.label=1;case 1:return[4,new n(e.read())];case 2:if(i=(a=o.sent()).done,u=a.value,!i)return[3,5];if(!r)return[3,4];return[4,r];case 3:o.sent(),o.label=4;case 4:return[3,14];case 5:r+=t.decode(u,{stream:!0}),r=null!==(c=(s=r.split("\n")).pop())&&void 0!==c?c:"",l=!0,f=!1,d=void 0,o.label=6;case 6:o.trys.push([6,11,12,13]),p=s[Symbol.iterator](),o.label=7;case 7:if(l=(h=p.next()).done)return[3,10];return[4,h.value];case 8:o.sent(),o.label=9;case 9:return l=!0,[3,7];case 10:return[3,13];case 11:return v=o.sent(),f=!0,d=v,[3,13];case 12:try{l||null==p.return||p.return()}finally{if(f)throw d}return[7];case 13:return[3,1];case 14:return[2]}})},(c=function(){return new a(e.apply(this,arguments))}).apply(this,arguments)}},69152:(e,t,r)=>{r.d(t,{V:()=>n});function n(e,t){if(null==e)throw Error(t)}}}]);