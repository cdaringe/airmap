"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{1988:function(t,e,r){r.d(e,{Ok:function(){return i},Hw:function(){return c},e5:function(){return u}});var n=r(5624);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){try{var e=new URL(t),r=o(e.pathname.substr(1).split("/"),3),n=r[0],a=r[1],i=r[2];if("spreadsheets"===n&&"d"===a&&i&&e.host.match("google.com"))return!0}catch(u){}return!1}function u(t){var e=new URL(t);return e.pathname=a(e.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(e)}var c=function(t){var e=new URL(t),r=new URLSearchParams(e.search);return r.has("format")||r.set("format","csv"),e.search=r.toString(),function(t,e){return fetch(t,e).then((function(t){return t.body})).then((function(t){var e=null===t||void 0===t?void 0:t.getReader();return(0,n.k)(e,"missing stream body"),e}))}(u(e.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},8677:function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(e,{q:function(){return o}});var o=function(t){return function(e){var r=n(e,2),o=r[0],a=r[1];return["all",[">=",t,o],["<",t,a]]}}},3781:function(t,e,r){r.r(e),r.d(e,{getResources:function(){return N}});var n={};r.r(n),r.d(n,{getLevels:function(){return A}});var o=r(4235),a=r.n(o),i=r(1988),u=r(5624);function c(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,o)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){f(t,e,r[e])}))}return t}var l,p=function(t){return parseInt(t)},d=function(t){return 1e3*parseInt(t)},m=function(t){return parseFloat(t)},v=(l=a().mark((function t(e,r){var n,o,i,c,l,y;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0===r?{records:[],partial:""}:r,t.next=3,e.read();case 3:return o=t.sent,i=o.done,((c=o.value)||i)&&(n.partial+="string"===typeof c?c:c?(new TextDecoder).decode(c):"",l=n.partial.split(/\n/g),y=l.length-1,l.forEach((function(t,e){if(y!==e||i){var r=t.split(",");if(n.headerIndiciesByName){var o="VOC (ppb)",a=r[n.headerIndiciesByName["VOC (ppb)"]],c=r[n.headerIndiciesByName.timestamp],l=r[n.headerIndiciesByName["pm 2.5 (ug/m3)"]];(0,u.k)(a,"voc missing (".concat(o,", value: ").concat(a,")")),(0,u.k)(c,"timestamp missing"),(0,u.k)(l,"pm25 missing"),n.records.push({voc_ppb:p(a),timestamp:d(c),pm_2_5:m(l)}),i&&(n.partial="")}else n.headerIndiciesByName=r.reduce((function(t,e,r){return s({},t,f({},e.trim(),r))}),{})}else n.partial=t}))),t.abrupt("return",i?n:v(e,n));case 8:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var o=l.apply(t,e);function a(t){c(o,r,n,a,i,"next",t)}function i(t){c(o,r,n,a,i,"throw",t)}a(void 0)}))}),y=r(5205);function h(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,o)}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){b(t,e,r[e])}))}return t}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=function(t){var e=function(t){var e=t.measures,r=t.positions,n=t.r;e.length!==r.length&&console.warn("lossy data - measures ".concat(e.length,", positions ").concat(r.length));var o=r.map((function(t){return t.timestamp}));return e.reduce((function(t,e){var a=n.closestTo(e.timestamp,o);!function(t){var e=!0,r=!1,n=void 0;try{for(var a,i=o[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){if(a.value===t.getTime())return;o.shift()}}catch(u){r=!0,n=u}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}(a);var i=r.find((function(t){return t.timestamp===a.getTime()})),u=g({},e,{date:new Date(e.timestamp),latitude:i.latitude,longitude:i.longitude,skip:Math.abs(i.timestamp-e.timestamp)>6e4});return u.skip||t.push(u),t}),[])},r=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){h(a,n,o,i,u,"next",t)}function u(t){h(a,n,o,i,u,"throw",t)}i(void 0)}))}}(a().mark((function r(n){var o,c,f,s,l,p,d,m;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=w(n,2),c=o[0],f=o[1],(0,u.k)(c,""),(0,u.k)(f,""),r.t0=w,r.next=6,Promise.all([(0,i.Hw)(c).then(v),(0,i.Hw)(f).then(y.Q)]);case 6:return r.t1=r.sent,s=(0,r.t0)(r.t1,2),l=s[0],p=l.records,d=s[1],m=d.records,r.abrupt("return",e({measures:p,positions:m,r:t}));case 13:case"end":return r.stop()}}),r)}))),n=function(t){return{type:"FeatureCollection",features:t.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]},properties:g({},t)}}))}};return{combine:e,download:r,downloadGeoJSON:function(t){return r(t).then(n)},dateField:"date",toGeoJSON:n}},j=r(8677);function P(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S=["#6fc400","#feff00","#ffaa00","#ff5600","#991113","#4d0173"],k="voc_ppb",x=[[0,2e3],[2e3,4e3],[4e3,6e3],[6e3,8e3],[8e3,1e4],[12e3,1e9]],I=["get",k],A=function(t){var e=t.isMinMaxDynamicRange,r=t.geojson,n=0,o=1/0,a=-1/0,i=!0,u=!1,c=void 0;try{for(var f,s=r.features[Symbol.iterator]();!(i=(f=s.next()).done);i=!0){(n=f.value.properties.pm_2_5)>a&&(a=n),n<o&&(o=n)}}catch(m){u=!0,c=m}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}var l=S.length,p=e?(a-o)/l:0,d=e?P(new Array(l)).map((function(t,e){var r=o+e*p;return[r,r+p]})):x;return{circleCases:d.map((0,j.q)(I)).flatMap((function(t,e){return[t,S[e]]})),colors:S,fieldName:k,pm2Ranges:d}},N=function(t){return{download:O(t),mapbox:n}}},5205:function(t,e,r){r.d(e,{Q:function(){return p}});var n=r(4235),o=r.n(n);function a(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,o)}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){i(t,e,r[e])}))}return t}var c,f=function(t){return 1e3*parseInt(t)},s=function(t){return parseFloat(t)},l=function(t){return parseFloat(t)},p=(c=o().mark((function t(e,r){var n,a,c,d,m,v;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0===r?{records:[],partial:""}:r,t.next=3,e.read();case 3:return a=t.sent,c=a.done,((d=a.value)||c)&&(n.partial+="string"===typeof d?d:d?(new TextDecoder).decode(d):"",m=n.partial.split(/\n/g),v=m.length-1,m.forEach((function(t,e){if(v!==e||c){var r=t.split(",");n.headerIndiciesByName?(n.records.push({timestamp:f(r[n.headerIndiciesByName.timestamp]),latitude:s(r[n.headerIndiciesByName.latitude]),longitude:l(r[n.headerIndiciesByName.longitude])}),c&&(n.partial="")):n.headerIndiciesByName=r.reduce((function(t,e,r){return u({},t,i({},e.trim(),r))}),{})}else n.partial=t}))),t.abrupt("return",c?n:p(e,n));case 8:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var o=c.apply(t,e);function i(t){a(o,r,n,i,u,"next",t)}function u(t){a(o,r,n,i,u,"throw",t)}i(void 0)}))})},5624:function(t,e,r){function n(t,e){if(null===t||void 0===t)throw Error(e)}r.d(e,{k:function(){return n}})}}]);