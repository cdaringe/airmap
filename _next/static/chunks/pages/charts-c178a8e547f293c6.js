(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{1641:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/charts",function(){return r(7988)}])},7988:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return R}});var n=r(4637),o=r(9496),a=r(7383),c=r.n(a),u=r(3793),i=r(3978);function s(t){if(Array.isArray(t))return t}function f(t,e,r,n,o,a,c){try{var u=t[a](c),i=u.value}catch(s){return void r(s)}u.done?e(i):Promise.resolve(i).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){f(a,n,o,c,u,"next",t)}function u(t){f(a,n,o,c,u,"throw",t)}c(void 0)}))}}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(t,e){return s(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(n=(c=u.next()).done)&&(r.push(c.value),!e||r.length!==e);n=!0);}catch(i){o=!0,a=i}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(t,e)||d()}function y(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v=r(1616),w=r(6649),b=r(7358),x=r(6144),g=r(308),m=r(1242);function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return!e||"object"!==S(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k(t);if(e){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}var P=[new Date("2021-08-17 00:00:00"),new Date("2021-09-23 00:00:00")],A=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(c,t);var e,r,o,a=D(c);function c(){return j(this,c),a.apply(this,arguments)}return e=c,(r=[{key:"render",value:function(){var t=this.props,e=t.x,r=t.y,o=(t.stroke,t.payload);return(0,n.jsx)("g",{transform:"translate(".concat(e,",").concat(r,")"),children:(0,n.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",children:o.value})})}}])&&_(e.prototype,r),o&&_(e,o),c}(o.PureComponent),F=function(){return window.document.body.getBoundingClientRect().width};var R=function(){var t=(0,o.useState)(P[0])[0],e=(0,o.useState)(P[1])[0],r=(0,o.useState)(F()),a=r[0],f=r[1];(0,o.useLayoutEffect)((function(){var t=function(){f(F())};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]);var j=function(t,e,r,n){var o=h(e,2),a=o[0],f=o[1];return(0,u.useQuery)({queryKey:"get-chart-".concat(t,"-").concat(a.getTime(),"-").concat(f.getTime()),queryFn:l(c().mark((function t(e){var n,o,u,v,w,b,x,g,m,j,_,k;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,o=[],t.next=4,fetch(r);case 4:if(u=t.sent,v=u.body){t.next=8;break}throw new Error("missing data");case 8:return w=v.getReader(),b=new TextDecoder,x=b.decode.bind(b),g=function(t){return parseInt(t,10)},m=[function(t){return new Date(t)},parseFloat,g,g,g,parseFloat,parseFloat,parseFloat],j=new ReadableStream({start:function(t){return l(c().mark((function e(){var r,u,s,l,p,d,h,y,v,b,g,j,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,w.read();case 3:if(r=e.sent,u=r.done,s=r.value,!u){e.next=8;break}return e.abrupt("break",31);case 8:if(l=x(s),!(p=(0,i.parse)(l)).errors.length){e.next=12;break}throw new Error(JSON.stringify(p.errors));case 12:for(d=!0,h=!1,y=void 0,e.prev=13,v=p.data[Symbol.iterator]();!(d=(b=v.next()).done);d=!0)g=b.value,n?(j=g.map((function(t,e){return m[e](t)})),(_=j[0])>=a&&_<=f&&o.push(j)):n=g;e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),h=!0,y=e.t0;case 21:e.prev=21,e.prev=22,d||null==v.return||v.return();case 24:if(e.prev=24,!h){e.next=27;break}throw y;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=0;break;case 31:t.close(),w.releaseLock();case 33:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})))()}}),t.next=17,new Response(j).blob();case 17:return _=function(t){return[t.getDate(),t.getMonth(),t.getFullYear()]},k=y(o.reduce((function(t,e){var r=h(e,1)[0],n=h(_(r),3),o=n[0],a=n[1],c=n[2],u="".concat(o,"_").concat(a,"_").concat(c),i=t.get(u)||[];return i.push(e),t.set(u,i),t}),new Map).values()).map((function(t){var e,r=s(e=h(t,1)[0])||p(e)||d(),n=r[0],o=(r[1],r.slice(2),parseFloat((t.reduce((function(t,e){return t+h(e,2)[1]}),0)/t.length).toFixed(2))),a=new Date(n.getFullYear(),n.getMonth(),n.getDate());return{date:a,prettyDate:"".concat(a.getDate()," ").concat(a.toLocaleString("default",{month:"long"})," ").concat(a.getFullYear()),vocAverage:o}})).sort((function(t,e){return t.date>e.date?1:-1})),t.abrupt("return",{header:n,rows:k});case 20:case"end":return t.stop()}}),t)})))})}("sampleatmos",[t,e],["/airmap","/atmotube__bank_st__sample.csv"].join("")),_=j.isLoading,k=j.error,O=j.data;if(_)return"is loading";if(k)return String(k);var E=null===O||void 0===O?void 0:O.rows;if(!E)throw new Error("missing data");return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl block text-center",children:"VOC, ppm"}),(0,n.jsx)("br",{}),(0,n.jsxs)(v.T,{width:a,height:600,data:E,margin:{top:10,right:30,left:0,bottom:0},children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"colorVoc",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,n.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,n.jsx)(w.u,{fillOpacity:1,fill:"url(#colorVoc)",type:"monotone",dataKey:"vocAverage",stroke:"#8884d8"}),(0,n.jsx)(b.q,{vertical:!0,horizontal:!0,stroke:"#ccc",strokeDasharray:"3 3"}),(0,n.jsx)(x.u,{}),(0,n.jsx)(g.K,{label:"Date",height:200,dataKey:"prettyDate",tick:(0,n.jsx)(A,{})}),(0,n.jsx)(m.B,{})]})]})}}},function(t){t.O(0,[374,774,888,179],(function(){return e=1641,t(t.s=e);var e}));var e=t.O();_N_E=e}]);