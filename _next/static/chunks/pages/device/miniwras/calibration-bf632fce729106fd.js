(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{1387:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/device/miniwras/calibration",function(){return n(2664)}])},2664:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return p}});var t=n(1250),a=n(8832),i=n(4221),s=n(9901),l=n(637),c=n(1804),o=n(1750),u=n(8833);function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=[],t=!0,a=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(t=(s=l.next()).done)&&(n.push(s.value),!r||n.length!==r);t=!0);}catch(c){a=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=function(){var e,r=(0,i.useRouter)(),n=(0,u.wl)(),p=n.value.luggage;if(!p)return console.warn("missing miniwras luggage data, sending user to homepage"),r.replace("/"),null;var f=d(s.useState(0),2),x=f[0],j=f[1],b=p.features,v=(0,s.useState)((null===(e=b[x])||void 0===e?void 0:e.properties.pm05)||0),N=v[0],g=v[1],y=s.useMemo((function(){return b.map((function(e){var r=l.Sm.apply(void 0,m(e.properties.channels.sub3000nm.map((function(e){return(0,l.Bk)(e.value,e.diameterMidpointNm,e.calibrationIndex)}))));return e.properties.pm_2_5/r}))}),[b]),_=s.useMemo((function(){return h(y)}),[y]),M=s.useMemo((function(){return function(e){var r=e.length,n=h(e);return Math.sqrt(e.map((function(e){return Math.pow(e-n,2)})).reduce((function(e,r){return e+r}))/r)}(y)}),[y]),w=s.useMemo((function(){var e=b[x].properties,r=l.Sm.apply(void 0,m(e.channels.sub500nm.map((function(e){return(0,l.Bk)(e.value,e.diameterMidpointNm,e.calibrationIndex)}))));return N/r}),[N,b,x]);return b.forEach((function(e){var r,n,t=e.properties;t.pm05Calibrated=(r=t.channels,n=w,l.Sm.apply(void 0,m(r.sub500nm.map((function(e){return(0,l.VY)(e.value,e.diameterMidpointNm,e.calibrationIndex,n)}))))),t.pm05To3Calibrated=t.pm_2_5-t.pm05Calibrated})),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mt-4 mr-2",htmlFor:"reference",children:"Calibration Sample:"}),(0,t.jsx)("select",{onChange:function(e){j(parseInt(e.currentTarget.value,10))},children:b.map((function(e,r){return(0,t.jsx)("option",{value:r,children:r},r)}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mr-2",htmlFor:"reference",children:"0.5 \xb5g/m\xb3 reference:"}),(0,t.jsx)(o.Z,{name:"reference",label:"0.5 microgram per cubic meter reference",type:"number",onChange:function(e){try{g(parseFloat(e.currentTarget.value))}catch(r){}},defaultValue:N})]}),(0,t.jsxs)("table",{className:"mt-2",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-1",children:"RHO_DERIVED (PM2.5) MEAN"}),(0,t.jsx)("th",{className:"p-1",children:"RHO_DERIVED (PM2.5) STD_DEV"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-1",children:_.toFixed(2)}),(0,t.jsx)("td",{className:"p-1",children:M.toFixed(2)})]})]}),(0,t.jsxs)("table",{className:"mt-2",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-1",children:"RHO_GRIMM (PM0.5, kg/m3, Grimm)"}),(0,t.jsx)("th",{className:"p-1",children:"RHO_PM05_CALIBRATED (PM0.5, kg/m3)"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-1",children:l.w_.toFixed(2)}),(0,t.jsx)("td",{className:"p-1",children:w.toFixed(2)})]}),(0,t.jsx)("tr",{})]}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,{onClick:function(){n.update(n.value),r.push("/map")},children:"Continue"})}),(0,t.jsx)("br",{}),(0,t.jsx)(a.default,{children:(0,t.jsx)("style",{children:"\ntable#caltab, th, td {\n  border: 1px solid black;\n}\n"})},"caltable"),(0,t.jsxs)("table",{className:"mt-2",id:"caltab",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-1",children:"Time"}),(0,t.jsx)("th",{className:"p-1",children:"RHO_DERIVED (PM2.5) \xb5g/m3"}),(0,t.jsx)("th",{className:"p-1",children:"Density \xb5g/m3 PM0.5 (uncalibrated)"}),(0,t.jsx)("th",{className:"p-1",children:"Density \xb5g/m3 PM0.5 (calibrated)"})]}),p.features.map((function(e,r){var n=e.properties,a=n.date,i=n.pm05,s=n.pm05Calibrated;return(0,t.jsxs)("tr",{className:r===x?"bg-lime-200":"",children:[(0,t.jsx)("td",{className:"p-1",children:a.toLocaleTimeString()}),(0,t.jsx)("td",{className:"p-1",children:y[r].toFixed()}),(0,t.jsx)("td",{className:"p-1",children:i.toFixed(2)}),(0,t.jsx)("td",{className:"p-1",children:s.toFixed(2)})]},r)}))]})]})},h=function(e){return l.Sm.apply(void 0,m(e))/e.length}}},function(e){e.O(0,[296,774,888,179],(function(){return r=1387,e(e.s=r);var r}));var r=e.O();_N_E=r}]);