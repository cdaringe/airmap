(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{1387:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/device/miniwras/calibration",function(){return n(2664)}])},2664:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return p}});var t=n(1250),a=n(8832),i=n(4221),l=n(9901),s=n(637),c=n(1804),o=n(1750),u=n(8833);function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=[],t=!0,a=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(t=(l=s.next()).done)&&(n.push(l.value),!r||n.length!==r);t=!0);}catch(c){a=!0,i=c}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=function(){var e,r=(0,i.useRouter)(),n=(0,u.wl)(),p=n.value.luggage;if(!p)return console.warn("missing miniwras luggage data, sending user to homepage"),r.replace("/"),null;var h=d(l.useState(0),2),f=h[0],x=h[1],b=p.features,j=(0,l.useState)((null===(e=b[f])||void 0===e?void 0:e.properties.pm05)||0),v=j[0],g=j[1],N=l.useMemo((function(){var e=b[f].properties,r=s.Sm.apply(void 0,m(e.channels.sub500nm.map((function(e){return(0,s.Bk)(e.value,e.diameterMidpointNm,e.calibrationIndex)}))));return v/r}),[v,b,f]);return b.forEach((function(e){var r,n,t=e.properties;t.pm05Calibrated=(r=t.channels,n=N,s.Sm.apply(void 0,m(r.sub500nm.map((function(e){return(0,s.VY)(e.value,e.diameterMidpointNm,e.calibrationIndex,n)}))))),t.pm05To3Calibrated=t.pm_2_5-t.pm05Calibrated})),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mt-4 mr-2",htmlFor:"reference",children:"Calibration Sample:"}),(0,t.jsx)("select",{onChange:function(e){x(parseInt(e.currentTarget.value,10))},children:b.map((function(e,r){return(0,t.jsx)("option",{value:r,children:r},r)}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mr-2",htmlFor:"reference",children:"0.5 \xb5g/m\xb3 reference:"}),(0,t.jsx)(o.Z,{name:"reference",label:"0.5 microgram per cubic meter reference",type:"number",onChange:function(e){try{g(parseFloat(e.currentTarget.value))}catch(r){}},defaultValue:v})]}),(0,t.jsxs)("table",{className:"mt-2",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-1",children:"RHO_TRUE (PM0.5, kg/m3, Grimm)"}),(0,t.jsx)("td",{className:"p-1",children:"RHO_CALIBRATED (PM0.5, kg/m3)"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"p-1",children:s.OY.toFixed(2)}),(0,t.jsx)("td",{className:"p-1",children:N.toFixed(2)})]}),(0,t.jsx)("tr",{})]}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,{onClick:function(){n.update(n.value),r.push("/map")},children:"Continue"})}),(0,t.jsx)("br",{}),(0,t.jsx)(a.default,{children:(0,t.jsx)("style",{children:"\ntable#caltab, th, td {\n  border: 1px solid black;\n}\n"})},"caltable"),(0,t.jsxs)("table",{className:"mt-2",id:"caltab",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-1",children:"Time"}),(0,t.jsx)("th",{className:"p-1",children:"Density \xb5g/m3 PM0.5 (uncalibrated)"}),(0,t.jsx)("th",{className:"p-1",children:"Density \xb5g/m3 PM0.5 (calibrated)"})]}),p.features.map((function(e,r){var n=e.properties,a=n.date,i=n.pm05,l=n.pm05Calibrated;return(0,t.jsxs)("tr",{className:r===f?"bg-lime-200":"",children:[(0,t.jsx)("td",{className:"p-1",children:a.toLocaleTimeString()}),(0,t.jsx)("td",{className:"p-1",children:i.toFixed(2)}),(0,t.jsx)("td",{className:"p-1",children:l.toFixed(2)})]},r)}))]})]})}}},function(e){e.O(0,[296,774,888,179],(function(){return r=1387,e(e.s=r);var r}));var r=e.O();_N_E=r}]);