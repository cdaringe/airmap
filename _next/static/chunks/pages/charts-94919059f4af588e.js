(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{37539:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/charts",function(){return r(52793)}])},52793:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eh});var n=r(88910),i=r(61455),a=r(91249),s=r(12551),o=r(65723),u=r(22155),l=r(33774),c=r(70851),h=r(64024),d=r(27787),f=r.n(d),p=r(54213),m=r.n(p),y=r(7168),g=r.n(y),_=r(81202),v=r.n(_),b=r(41563),k=r.n(b),x=r(72269),E=r(44978),w=r(99133),O=r(29161),A=r(21633),S=r(55761),C=r(19765),R=r(67042),j=["layout","type","stroke","connectNulls","isRange","ref"],D=["key"];function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function L(){return(L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){W(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(N=function(){return!!e})()}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,r){return(t=q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}var U=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n,r=[].concat(a),t=z(t),W(e=function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,N()?Reflect.construct(t,r||[],z(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0}),W(e,"id",(0,S.NF)("recharts-area-")),W(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),f()(t)&&t()}),W(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),f()(t)&&t()}),e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(n,e),t=[{key:"renderDots",value:function(e,t,r){var i=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(i&&!a)return null;var s=this.props,o=s.dot,l=s.points,c=s.dataKey,h=(0,R.J9)(this.props,!1),d=(0,R.J9)(o,!0),f=l.map(function(e,t){var r=F(F(F({key:"dot-".concat(t),r:3},h),d),{},{index:t,cx:e.x,cy:e.y,dataKey:c,value:e.value,payload:e.payload,points:l});return n.renderDotItem(o,r)}),p={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(r,")"):null};return u.createElement(w.W,L({className:"recharts-area-dots"},p),f)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,i=t.strokeWidth,a=n[0].x,s=n[n.length-1].x,o=e*Math.abs(a-s),l=m()(n.map(function(e){return e.y||0}));return((0,S.Et)(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(m()(r.map(function(e){return e.y||0})),l)),(0,S.Et)(l))?u.createElement("rect",{x:a<s?a:a-o,y:0,width:o,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,i=t.strokeWidth,a=n[0].y,s=n[n.length-1].y,o=e*Math.abs(a-s),l=m()(n.map(function(e){return e.x||0}));return((0,S.Et)(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(m()(r.map(function(e){return e.x||0})),l)),(0,S.Et)(l))?u.createElement("rect",{x:0,y:a<s?a:a-o,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var i=this.props,a=i.layout,s=i.type,o=i.stroke,l=i.connectNulls,c=i.isRange,h=(i.ref,I(i,j));return u.createElement(w.W,{clipPath:r?"url(#clipPath-".concat(n,")"):null},u.createElement(x.I,L({},(0,R.J9)(h,!0),{points:e,connectNulls:l,type:s,baseLine:t,layout:a,stroke:"none",className:"recharts-area-area"})),"none"!==o&&u.createElement(x.I,L({},(0,R.J9)(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&u.createElement(x.I,L({},(0,R.J9)(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,i=n.points,a=n.baseLine,s=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,f=this.state,p=f.prevPoints,m=f.prevBaseLine;return u.createElement(h.Ay,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var s=n.t;if(p){var o,l=p.length/i.length,c=i.map(function(e,t){var r=Math.floor(t*l);if(p[r]){var n=p[r],i=(0,S.Dj)(n.x,e.x),a=(0,S.Dj)(n.y,e.y);return F(F({},e),{},{x:i(s),y:a(s)})}return e});return o=(0,S.Et)(a)&&"number"==typeof a?(0,S.Dj)(m,a)(s):g()(a)||v()(a)?(0,S.Dj)(m,0)(s):a.map(function(e,t){var r=Math.floor(t*l);if(m[r]){var n=m[r],i=(0,S.Dj)(n.x,e.x),a=(0,S.Dj)(n.y,e.y);return F(F({},e),{},{x:i(s),y:a(s)})}return e}),r.renderAreaStatically(c,o,e,t)}return u.createElement(w.W,null,u.createElement("defs",null,u.createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(s))),u.createElement(w.W,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(i,a,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,i=r.baseLine,a=r.isAnimationActive,s=this.state,o=s.prevPoints,u=s.prevBaseLine,l=s.totalLength;return a&&n&&n.length&&(!o&&l>0||!k()(o,n)||!k()(u,i))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,i,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,i=t.points,a=t.className,s=t.top,o=t.left,l=t.xAxis,h=t.yAxis,d=t.width,f=t.height,p=t.isAnimationActive,m=t.id;if(r||!i||!i.length)return null;var y=this.state.isAnimationFinished,_=1===i.length,v=(0,c.A)("recharts-area",a),b=l&&l.allowDataOverflow,k=h&&h.allowDataOverflow,x=b||k,E=g()(m)?this.id:m,A=null!==(e=(0,R.J9)(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},S=A.r,C=A.strokeWidth,j=((0,R.sT)(n)?n:{}).clipDot,D=void 0===j||j,P=2*(void 0===S?3:S)+(void 0===C?2:C);return u.createElement(w.W,{className:v},b||k?u.createElement("defs",null,u.createElement("clipPath",{id:"clipPath-".concat(E)},u.createElement("rect",{x:b?o:o-d/2,y:k?s:s-f/2,width:b?d:2*d,height:k?f:2*f})),!D&&u.createElement("clipPath",{id:"clipPath-dots-".concat(E)},u.createElement("rect",{x:o-P/2,y:s-P/2,width:d+P,height:f+P}))):null,_?null:this.renderArea(x,E),(n||_)&&this.renderDots(x,D,E),(!p||y)&&O.Z.renderCallByParent(this.props,i))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],t&&M(n.prototype,t),r&&M(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(u.PureComponent);W(U,"displayName","Area"),W(U,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!A.m.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),W(U,"getBaseValue",function(e,t,r,n){var i=e.layout,a=e.baseValue,s=t.props.baseValue,o=null!=s?s:a;if((0,S.Et)(o)&&"number"==typeof o)return o;var u="horizontal"===i?n:r,l=u.scale.domain();if("number"===u.type){var c=Math.max(l[0],l[1]),h=Math.min(l[0],l[1]);return"dataMin"===o?h:"dataMax"===o?c:c<0?c:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===o?l[0]:"dataMax"===o?l[1]:l[0]}),W(U,"getComposedData",function(e){var t,r=e.props,n=e.item,i=e.xAxis,a=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,u=e.bandSize,l=e.dataKey,c=e.stackedData,h=e.dataStartIndex,d=e.displayedData,f=e.offset,p=r.layout,m=c&&c.length,y=U.getBaseValue(r,n,i,a),g="horizontal"===p,_=!1,v=d.map(function(e,t){m?r=c[h+t]:Array.isArray(r=(0,C.kr)(e,l))?_=!0:r=[y,r];var r,n=null==r[1]||m&&null==(0,C.kr)(e,l);return g?{x:(0,C.nb)({axis:i,ticks:s,bandSize:u,entry:e,index:t}),y:n?null:a.scale(r[1]),value:r,payload:e}:{x:n?null:i.scale(r[1]),y:(0,C.nb)({axis:a,ticks:o,bandSize:u,entry:e,index:t}),value:r,payload:e}});return t=m||_?v.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return g?{x:e.x,y:null!=t&&null!=e.y?a.scale(t):null}:{x:null!=t?i.scale(t):null,y:e.y}}):g?a.scale(y):i.scale(y),F({points:v,baseLine:t,layout:p,isRange:_},f)}),W(U,"renderDotItem",function(e,t){var r;if(u.isValidElement(e))r=u.cloneElement(e,t);else if(f()(e))r=e(t);else{var n=(0,c.A)("recharts-area-dot","boolean"!=typeof e?e.className:""),i=t.key,a=I(t,D);r=u.createElement(E.c,L({},a,{key:i,className:n}))}return r});var K=r(87995),H=r(45188),J=r(89702),V=(0,l.gu)({chartName:"AreaChart",GraphicalChild:U,axisComponents:[{axisType:"xAxis",AxisComp:K.W},{axisType:"yAxis",AxisComp:H.h}],formatAxisMap:J.pr}),Q=r(71532),Y=r(66257),$=r(48967),G=r(97899),Z=r(35897),X=r(80716),ee=r(8565),et=r(61760),er=r(65959),en=r(78456),ei=r(29928),ea=function(e){return[e.getDate(),e.getMonth(),e.getFullYear()]},es=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n,i=(0,s._)(t,2),a=i[0],o=i[1];return(0,ei.useQuery)({queryKey:"get-chart-".concat(e,"-").concat(a.getTime(),"-").concat(o.getTime()),queryFn:(n=(0,$._)(function(e){var t,n,i,u,l,c,h,d,f;return(0,er.YH)(this,function(e){switch(e.label){case 0:return t=null,n=[],[4,fetch(r)];case 1:if(!(i=e.sent().body))throw Error("missing data");return u=i.getReader(),c=(l=new TextDecoder).decode.bind(l),d=[function(e){return new Date(e)},parseFloat,h=function(e){return parseInt(e,10)},h,h,parseFloat,parseFloat,parseFloat],[4,new Response(new ReadableStream({start:function(e){return(0,$._)(function(){var r,i,s,l,h,f,p,m,y,g,_,v,b;return(0,er.YH)(this,function(k){switch(k.label){case 0:return[4,u.read()];case 1:if(i=(r=k.sent()).done,s=r.value,i)return[3,2];if(l=c(s),(h=(0,en.parse)(l)).errors.length)throw Error(JSON.stringify(h.errors));f=!0,p=!1,m=void 0;try{for(y=h.data[Symbol.iterator]();!(f=(g=y.next()).done);f=!0)_=g.value,t?(b=(v=_.map(function(e,t){return d[t](e)}))[0])>=a&&b<=o&&n.push(v):t=_}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}return[3,0];case 2:return e.close(),u.releaseLock(),[2]}})})()}})).blob()];case 2:return e.sent(),f=(0,et._)(n.reduce(function(e,t){var r=(0,s._)(t,1)[0],n=(0,s._)(ea(r),3),i=n[0],a=n[1],o=n[2],u="".concat(i,"_").concat(a,"_").concat(o),l=e.get(u)||[];return l.push(t),e.set(u,l),e},new Map).values()).map(function(e){var t,r=(t=(0,s._)(e,1)[0],(0,G._)(t)||(0,Z._)(t)||(0,ee._)(t)||(0,X._)()),n=r[0];r[1],r.slice(2);var i=parseFloat((e.reduce(function(e,t){return e+(0,s._)(t,2)[1]},0)/e.length).toFixed(2)),a=new Date(n.getFullYear(),n.getMonth(),n.getDate());return{date:a,prettyDate:"".concat(a.getDate()," ").concat(a.toLocaleString("default",{month:"long"})," ").concat(a.getFullYear()),vocAverage:i}}).sort(function(e,t){return e.date>t.date?1:-1}),[2,{header:t,rows:f}]}})}),function(e){return n.apply(this,arguments)})})},eo=[new Date("2021-08-17 00:00:00"),new Date("2021-09-23 00:00:00")],eu=function(e){function t(){return(0,i._)(this,t),(0,n._)(this,t,arguments)}return(0,a._)(t,e),t.prototype.render=function(){var e=this.props,t=e.x,r=e.y,n=(e.stroke,e.payload);return(0,o.jsx)("g",{transform:"translate(".concat(t,",").concat(r,")"),children:(0,o.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",children:n.value})})},t}(u.PureComponent),el=function(){return window.document.body.getBoundingClientRect().width},ec=function(e){var t=e.onChange,r=e.value,n=(0,s._)(ea(r),3),i=n[0],a=n[1],u=[n[2],a,i].map(function(e,t){var r=String(e);return 0===t?r:1===r.length?"0".concat(r):r}).join("-");return(0,o.jsx)("input",{type:"date",pattern:"\\d{4}-\\d{2}-\\d{2}",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date",onChange:t,value:u})};let eh=function(){var e=(0,s._)((0,u.useState)(eo[0]),2),t=e[0],r=e[1],n=(0,s._)((0,u.useState)(eo[1]),2),i=n[0],a=n[1],l=(0,s._)((0,u.useState)(el()),2),c=l[0],h=l[1];(0,u.useLayoutEffect)(function(){var e=function(){h(el())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var d=es("sampleatmos",[t,i],"/airmap/atmotube__bank_st__sample.csv"),f=d.isLoading,p=d.error,m=d.data;if(f)return"is loading";if(p)return String(p);var y=null==m?void 0:m.rows;if(!y)throw Error("missing data");return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"start-date",children:"Start Date"}),(0,o.jsx)(ec,{name:"start-date",value:t,onChange:function(e){var t=new Date(e.currentTarget.value);t>i||r(t)}}),(0,o.jsx)("label",{htmlFor:"end-date",children:"End Date"}),(0,o.jsx)(ec,{name:"end-date",value:i,onChange:function(e){var r=new Date(e.currentTarget.value);r<t||a(r)}}),(0,o.jsx)("h1",{className:"block text-xl text-center",children:"VOC, ppm"}),(0,o.jsx)("br",{}),(0,o.jsxs)(V,{width:c,height:600,data:y,margin:{top:10,right:30,left:0,bottom:0},children:[(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"colorVoc",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,o.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,o.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,o.jsx)(U,{fillOpacity:1,fill:"url(#colorVoc)",type:"monotone",dataKey:"vocAverage",stroke:"#8884d8"}),(0,o.jsx)(Q.d,{vertical:!0,horizontal:!0,stroke:"#ccc",strokeDasharray:"3 3"}),(0,o.jsx)(Y.m,{}),(0,o.jsx)(K.W,{label:"Date",height:200,dataKey:"prettyDate",tick:(0,o.jsx)(eu,{})}),(0,o.jsx)(H.h,{label:"VOC, ppm"})]})]})}},78456:function(e,t){var r,n,i;n=[],void 0!==(i="function"==typeof(r=function e(){var t,r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:{},n=!r.document&&!!r.postMessage,i=r.IS_PAPA_WORKER||!1,a={},s=0,o={};function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=v(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,t){var n=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<n){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(n)].join(t)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1;var n=this._partialLine+e,a=(this._partialLine="",this._handle.parse(n,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=n.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),n=this._finished||this._config.preview&&this._rowCount>=this._config.preview,i)r.postMessage({results:a,workerId:o.WORKER_ID,finished:n});else if(k(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!n||!k(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),n||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){k(this._config.error)?this._config.error(e):i&&this._config.error&&r.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e,r,i=this._config.downloadRequestHeaders;for(r in i)t.setRequestHeader(r,i[r])}this._config.chunkSize&&(e=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+e));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){let e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(e=(e=t).getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(Error(e))}}function c(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),u.call(this,e);var t,r,n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,i=(this._config.chunkSize&&(i=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,i)),t.readAsText(e,this._config.encoding));n||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;u.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,r;if(!this._finished)return t=(e=this._config.chunkSize)?(r=t.substring(0,e),t.substring(e)):(r=t,""),this._finished=!t,this.parseChunk(r)}}function d(e){u.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=b(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=b(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=b(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(e){var t,r,n,i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,s=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,l=0,c=0,h=!1,d=!1,f=[],y={data:[],errors:[],meta:{}};function g(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function _(){if(y&&n&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(y.data=y.data.filter(function(e){return!g(e)})),b()){if(y){if(Array.isArray(y.data[0])){for(var t,r=0;b()&&r<y.data.length;r++)y.data[r].forEach(i);y.data.splice(0,1)}else y.data.forEach(i)}function i(t,r){k(e.transformHeader)&&(t=e.transformHeader(t,r)),f.push(t)}}function u(t,r){for(var n=e.header?{}:[],i=0;i<t.length;i++){let r,l;var o=i,u=t[i],u=(r=o=e.header?i>=f.length?"__parsed_extra":f[i]:o,l=u=e.transform?e.transform(u,o):u,(e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping))?"true"===l||"TRUE"===l||"false"!==l&&"FALSE"!==l&&((e=>{if(a.test(e)&&-0x20000000000000<(e=parseFloat(e))&&e<0x20000000000000)return 1})(l)?parseFloat(l):s.test(l)?new Date(l):""===l?null:l):l);"__parsed_extra"===o?(n[o]=n[o]||[],n[o].push(u)):n[o]=u}return e.header&&(i>f.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+i,c+r):i<f.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+i,c+r)),n}y&&(e.header||e.dynamicTyping||e.transform)&&(t=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(u),t=y.data.length):y.data=u(y.data,0),e.header&&y.meta&&(y.meta.fields=f),c+=t)}function b(){return e.header&&0===f.length}function x(e,t,r,n){e={type:e,code:t,message:r},void 0!==n&&(e.row=n),y.errors.push(e)}k(e.step)&&(i=e.step,e.step=function(t){y=t,b()?_():(_(),0!==y.data.length&&(l+=t.data.length,e.preview&&l>e.preview?r.abort():(y.data=y.data[0],i(y,u))))}),this.parse=function(i,a,s){var u=e.quoteChar||'"',u=(e.newline||(e.newline=this.guessLineEndings(i,u)),n=!1,e.delimiter?k(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter):((u=((t,r,n,i,a)=>{var s,u,l,c;a=a||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var h=0;h<a.length;h++){for(var d,f=a[h],p=0,y=0,_=0,v=(l=void 0,new m({comments:i,delimiter:f,newline:r,preview:10}).parse(t)),b=0;b<v.data.length;b++)n&&g(v.data[b])?_++:(y+=d=v.data[b].length,void 0===l?l=d:0<d&&(p+=Math.abs(d-l),l=d));0<v.data.length&&(y/=v.data.length-_),(void 0===u||p<=u)&&(void 0===c||c<y)&&1.99<y&&(u=p,s=f,c=y)}return{successful:!!(e.delimiter=s),bestDelimiter:s}})(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=u.bestDelimiter:(n=!0,e.delimiter=o.DefaultDelimiter),y.meta.delimiter=e.delimiter),v(e));return e.preview&&e.header&&u.preview++,t=i,y=(r=new m(u)).parse(t,a,s),_(),h?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,r.abort(),t=k(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){u.streamer._halted?(h=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),y.meta.aborted=!0,k(e.complete)&&e.complete(y),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576);var t=RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(t,"")).split("\r"),t=e.split("\n"),e=1<t.length&&t[0].length<r[0].length;if(1===r.length||e)return"\n";for(var n=0,i=0;i<r.length;i++)"\n"===r[i][0]&&n++;return n>=r.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t=(e=e||{}).delimiter,r=e.newline,n=e.comments,i=e.step,a=e.preview,s=e.fastMode,u=null,l=null==e.quoteChar?'"':e.quoteChar,c=l;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),n===t)throw Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var h=0,d=!1;this.parse=function(o,f,m){if("string"!=typeof o)throw Error("Input must be a string");var y=o.length,g=t.length,_=r.length,v=n.length,b=k(i),x=[],E=[],w=[],O=h=0;if(!o)return M();if(s||!1!==s&&-1===o.indexOf(l)){for(var A=o.split(r),S=0;S<A.length;S++){if(w=A[S],h+=w.length,S!==A.length-1)h+=r.length;else if(m)break;if(!n||w.substring(0,v)!==n){if(b){if(x=[],I(w.split(t)),N(),d)return M()}else I(w.split(t));if(a&&a<=S)return x=x.slice(0,a),M(!0)}}return M()}for(var C=o.indexOf(t,h),R=o.indexOf(r,h),j=RegExp(p(c)+p(l),"g"),D=o.indexOf(l,h);;)if(o[h]===l)for(D=h,h++;;){if(-1===(D=o.indexOf(l,D+1)))return m||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:h}),T();if(D===y-1)return T(o.substring(h,D).replace(j,l));if(l===c&&o[D+1]===c)D++;else if(l===c||0===D||o[D-1]!==c){-1!==C&&C<D+1&&(C=o.indexOf(t,D+1));var P=L(-1===(R=-1!==R&&R<D+1?o.indexOf(r,D+1):R)?C:Math.min(C,R));if(o.substr(D+1+P,g)===t){w.push(o.substring(h,D).replace(j,l)),o[h=D+1+P+g]!==l&&(D=o.indexOf(l,h)),C=o.indexOf(t,h),R=o.indexOf(r,h);break}if(P=L(R),o.substring(D+1+P,D+1+P+_)===r){if(w.push(o.substring(h,D).replace(j,l)),F(D+1+P+_),C=o.indexOf(t,h),D=o.indexOf(l,h),b&&(N(),d))return M();if(a&&x.length>=a)return M(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:h}),D++}}else if(n&&0===w.length&&o.substring(h,h+v)===n){if(-1===R)return M();h=R+_,R=o.indexOf(r,h),C=o.indexOf(t,h)}else if(-1!==C&&(C<R||-1===R))w.push(o.substring(h,C)),h=C+g,C=o.indexOf(t,h);else{if(-1===R)break;if(w.push(o.substring(h,R)),F(R+_),b&&(N(),d))return M();if(a&&x.length>=a)return M(!0)}return T();function I(e){x.push(e),O=h}function L(e){return -1!==e&&(e=o.substring(D+1,e))&&""===e.trim()?e.length:0}function T(e){return m||(void 0===e&&(e=o.substring(h)),w.push(e),h=y,I(w),b&&N()),M()}function F(e){h=e,I(w),w=[],R=o.indexOf(r,h)}function M(n){if(e.header&&!f&&x.length){var i=x[0],a={},s=new Set(i);let t=!1;for(let r=0;r<i.length;r++){let n=i[r];if(a[n=k(e.transformHeader)?e.transformHeader(n,r):n]){let e,o=a[n];for(;e=n+"_"+o,o++,s.has(e););s.add(e),i[r]=e,a[n]++,t=!0,(u=null===u?{}:u)[e]=n}else a[n]=1,i[r]=n;s.add(n)}t&&console.warn("Duplicate headers found and renamed.")}return{data:x,errors:E,meta:{delimiter:t,linebreak:r,aborted:d,truncated:!!n,cursor:O+(f||0),renamedHeaders:u}}}function N(){i(M()),x=[],E=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return h}}function y(e){var t=e.data,r=a[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){n=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(k(r.userStep)){for(var s=0;s<t.results.data.length&&(r.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},i),!n);s++);delete t.results}else k(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!n&&g(t.workerId,t.results)}function g(e,t){var r=a[e];k(r.userComplete)&&r.userComplete(t),r.terminate(),delete a[e]}function _(){throw Error("Not implemented.")}function v(e){if("object"!=typeof e||null===e)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=v(e[t]);return r}function b(e,t){return function(){e.apply(t,arguments)}}function k(e){return"function"==typeof e}return o.parse=function(t,n){var i,u,f,p=(n=n||{}).dynamicTyping||!1;if(k(p)&&(n.dynamicTypingFunction=p,p={}),n.dynamicTyping=p,n.transform=!!k(n.transform)&&n.transform,!n.worker||!o.WORKERS_SUPPORTED){let e;return p=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=65279!==(e=t).charCodeAt(0)?e:e.slice(1),p=new(n.download?l:h)(n)):!0===t.readable&&k(t.read)&&k(t.on)?p=new d(n):(r.File&&t instanceof File||t instanceof Object)&&(p=new c(n)),p.stream(t)}(p=!!o.WORKERS_SUPPORTED&&(u=r.URL||r.webkitURL||null,f=e.toString(),i=o.BLOB_URL||(o.BLOB_URL=u.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",f,")();"],{type:"text/javascript"}))),(i=new r.Worker(i)).onmessage=y,i.id=s++,a[i.id]=i)).userStep=n.step,p.userChunk=n.chunk,p.userComplete=n.complete,p.userError=n.error,n.step=k(n.step),n.chunk=k(n.chunk),n.complete=k(n.complete),n.error=k(n.error),delete n.worker,p.postMessage({input:t,config:n,workerId:p.id})},o.unparse=function(e,t){var r=!1,n=!0,i=",",a="\r\n",s='"',u=s+s,l=!1,c=null,h=!1,d=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(u=t.escapeChar+s),t.escapeFormulae instanceof RegExp?h=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(h=/^[=+\-@\t\r].*$/)}})(),RegExp(p(s),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,l);if("object"==typeof e[0])return f(c||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],l);throw Error("Unable to serialize unrecognized input");function f(e,t,r){var s="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),u=!Array.isArray(t[0]);if(o&&n){for(var l=0;l<e.length;l++)0<l&&(s+=i),s+=m(e[l],l);0<t.length&&(s+=a)}for(var c=0;c<t.length;c++){var h=(o?e:t[c]).length,d=!1,f=o?0===Object.keys(t[c]).length:0===t[c].length;if(r&&!o&&(d="greedy"===r?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===r&&o){for(var p=[],y=0;y<h;y++){var g=u?e[y]:y;p.push(t[c][g])}d=""===p.join("").trim()}if(!d){for(var _=0;_<h;_++){0<_&&!f&&(s+=i);var v=o&&u?e[_]:_;s+=m(t[c][v],_)}c<t.length-1&&(!r||0<h&&!f)&&(s+=a)}}return s}function m(e,t){var n,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,h&&"string"==typeof e&&h.test(e)&&(e="'"+e,a=!0),n=e.toString().replace(d,u),(a=a||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||((e,t)=>{for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1})(n,o.BAD_DELIMITERS)||-1<n.indexOf(i)||" "===n.charAt(0)||" "===n.charAt(n.length-1))?s+n+s:n)}},o.RECORD_SEP="\x1e",o.UNIT_SEP="\x1f",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!r.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=0xa00000,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=f,o.NetworkStreamer=l,o.FileStreamer=c,o.StringStreamer=h,o.ReadableStreamStreamer=d,r.jQuery&&((t=r.jQuery).fn.parse=function(e){var n=e.config||{},i=[];return this.each(function(e){if(!("INPUT"===t(this).prop("tagName").toUpperCase()&&"file"===t(this).attr("type").toLowerCase()&&r.FileReader)||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)i.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},n)})}),a(),this;function a(){if(0===i.length)k(e.complete)&&e.complete();else{var r,n,a,u,l=i[0];if(k(e.before)){var c=e.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return r="AbortError",n=l.file,a=l.inputElem,u=c.reason,void(k(e.error)&&e.error({name:r},n,a,u));if("skip"===c.action)return void s();"object"==typeof c.config&&(l.instanceConfig=t.extend(l.instanceConfig,c.config))}else if("skip"===c)return void s()}var h=l.instanceConfig.complete;l.instanceConfig.complete=function(e){k(h)&&h(e,l.file,l.inputElem),s()},o.parse(l.file,l.instanceConfig)}}function s(){i.splice(0,1),a()}}),i&&(r.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?r.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(r.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&r.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(u.prototype)).constructor=d,o})?r.apply(t,n):r)&&(e.exports=i)}},e=>{var t=t=>e(e.s=t);e.O(0,[216,636,593,792],()=>t(37539)),_N_E=e.O()}]);