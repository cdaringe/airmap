"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{22483:(e,t,r)=>{r.d(t,{A:()=>n});function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}},93504:(e,t,r)=>{r.d(t,{A:()=>n});function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}},77031:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(70573),a=r(22483);function o(e){(0,a.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||(void 0===e?"undefined":(0,n._)(e))==="object"&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))}},53876:(e,t,r)=>{r.d(t,{DM:()=>u,k8:()=>s,zB:()=>i});var n=r(12551),a=r(61760),o=r(944);function i(e){try{var t=new URL(e),r=(0,n._)(t.pathname.substr(1).split("/"),3),a=r[0],o=r[1],i=r[2];if("spreadsheets"===a&&"d"===o&&i&&t.host.match("google.com"))return!0}catch(e){}return!1}function u(e){var t=new URL(e);return t.pathname=(0,a._)(t.pathname.substr(1).split("/").splice(0,3)).concat(["export"]).join("/"),String(t)}var s=function(e){var t=new URL(e),r=new URLSearchParams(t.search);return r.has("format")||r.set("format","csv"),t.search=r.toString(),(0,o.f)(u(t.toString()),{mode:"cors",redirect:"follow",headers:{accept:"text"}})}},26994:(e,t,r)=>{r.r(t),r.d(t,{dateField:()=>R,download:()=>L,downloadGeoJSON:()=>P,getResources:()=>Y,toGeoJSON:()=>F});var n,a,o={};r.r(o),r.d(o,{parse:()=>j});var i={};r.r(i),r.d(i,{dateField:()=>R,download:()=>L,downloadGeoJSON:()=>P,toGeoJSON:()=>F});var u={};r.r(u),r.d(u,{getLevels:()=>H});var s=r(34618),c=r(92831),l=r(48967),f=r(65959),d=r(53876),p=r(14952),h=r(12551),m=r(61760),v=r(70573),y=r(93504),g=r(77031),w=r(22483),_=function(e){var t=new Date(e.trim().split(" ").map(function(e,t){if(0===t){var r=(0,h._)(e.split("/"),3),n=r[0],a=r[1],o=r[2],i=function(e){return 1===e.length?"0".concat(e):e};return"".concat(o,"-").concat(i(n),"-").concat(i(a))}return"T".concat(e,"-07:00")}).join(""));if(isNaN(t.getTime()))throw Error("invalid date ".concat(t));return 7==t.getTimezoneOffset()/60?t:function(e,t){if((0,w.A)(2,arguments),!t||(void 0===t?"undefined":(0,v._)(t))!=="object")return new Date(NaN);var r=t.years?(0,y.A)(t.years):0,n=t.months?(0,y.A)(t.months):0,a=t.weeks?(0,y.A)(t.weeks):0,o=t.days?(0,y.A)(t.days):0,i=t.hours?(0,y.A)(t.hours):0,u=t.minutes?(0,y.A)(t.minutes):0,s=t.seconds?(0,y.A)(t.seconds):0,c=(0,g.A)(e),l=n||r?function(e,t){(0,w.A)(2,arguments);var r=(0,g.A)(e),n=(0,y.A)(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),o=new Date(r.getTime());return(o.setMonth(r.getMonth()+n+1,0),a>=o.getDate())?o:(r.setFullYear(o.getFullYear(),o.getMonth(),a),r)}(c,n+12*r):c;return new Date((o||a?function(e,t){(0,w.A)(2,arguments);var r=(0,g.A)(e),n=(0,y.A)(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}(l,o+7*a):l).getTime()+1e3*(s+60*(u+60*i)))}(t,{hours:1})};function b(e,t){if(null==e)throw Error(t)}var N=new Set((0,m._)(["Date","Lat","Lng","PM1.0 (\xb5g/m\xb3)","PM2.5 (\xb5g/m\xb3)","t (s)"]).concat((0,m._)(["Lat","Lng","t (s)","Relative Humidity (%)"]))),A={Date:"date",Lat:"latitude",Lng:"longitude","t (s)":"counter_t","PM1.0 (\xb5g/m\xb3)":"pm_1_0","PM2.5 (\xb5g/m\xb3)":"pm_2_5","Relative Humidity (%)":"humidity"},D={Date:function(e){return _(e)},Lat:parseFloat,Lng:parseFloat,"t (s)":function(e){return parseInt(e)},"PM1.0 (\xb5g/m\xb3)":parseFloat,"PM2.5 (\xb5g/m\xb3)":parseFloat,"Relative Humidity (%)":parseFloat},S=["a","A","z","Z"],k=(n=Math).min.apply(n,(0,m._)(S.map(function(e){return e.charCodeAt(0)}))),M=(a=Math).max.apply(a,(0,m._)(S.map(function(e){return e.charCodeAt(0)}))),x=function(e){var t=e.charCodeAt(0);return k<=t&&t<=M},j=function(){var e=(0,l._)(function(e){var t,r,n,a,o,i,u=arguments;return(0,f.YH)(this,function(l){switch(l.label){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:{headerIndiciesByName:{},partial:"",records:[]},[4,e.read()];case 1:return n=(r=l.sent()).done,a=r.value,t.partial+="string"==typeof a?a:a?new TextDecoder().decode(a):"",i=(o=t.partial.split(/\n/g)).length-1,o.forEach(function(e,r){if(i!==r||n){var a=e.split(",").map(function(e){return e.trim()});if(x(e[0]||""))t.headerIndiciesByName=a.reduce(function(e,t,r){return N.has(t)?(0,c._)((0,s._)({},e),(0,p._)({},t,r)):e},{});else if(""===a[0]);else{var o=Object.entries(t.headerIndiciesByName).reduce(function(e,t){var r=(0,h._)(t,2),n=r[0],o=r[1];return(0,c._)((0,s._)({},e),(0,p._)({},A[n],D[n](a[o])))},{});b(!Number.isNaN(o.counter_t),"NaN"),b(Number.isFinite(o.counter_t),"t (s) not ok"),t.records[o.counter_t]=(0,s._)({},t.records[o.counter_t]||{},o),n&&(t.partial="")}}else t.partial=e}),[2,n?t:j(e,t)]}})});return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,l._)(function(e){return(0,f.YH)(this,function(t){switch(t.label){case 0:return[4,(0,d.k8)(e[0]).then(j)];case 1:return[2,t.sent().records]}})});return function(t){return e.apply(this,arguments)}}(),F=function(e){return{type:"FeatureCollection",features:e.map(function(e){var t=e.humidity/100,r=.0534*e.pm_2_5-.0844*t+5.604;return{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:(0,c._)((0,s._)({},e),{pm_2_5:r})}})}},P=function(e){return L(e).then(F)},R="date",T=r(33925),E="pm_2_5",O=["#4d0173","#991113","#ff5600","#ffaa00","#feff00","#6fc400","#3aa702"].reverse(),C=["get",E],I=[0,.25,.5,1,2.5,5,20].map(function(e,t,r){return[e,r[t+1]||1/0]}),H=function(e){var t=e.isMinMaxDynamicRange,r=e.geojson,n=0,a=1/0,o=-1/0,i=!0,u=!1,s=void 0;try{for(var c,l=r.features[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)(n=c.value.properties.pm_2_5)>o&&(o=n),n<a&&(a=n)}catch(e){u=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(u)throw s}}var f=O.length,d=t?(o-a)/f:0,p=t?(0,m._)(Array(f)).map(function(e,t){var r=a+t*d;return[r,r+d]}):I;return{fieldName:E,colors:O,ranges:p,circleCases:p.map((0,T.t3)(C)).flatMap(function(e,t){return[e,O[t]]})}},Y=function(){return(0,c._)((0,s._)({},{download:i,mapbox:u}),{stream:o})}},944:(e,t,r)=>{function n(e){this.wrapped=e}function a(e){var t,r;function a(t,r){try{var i=e[t](r),u=i.value,s=u instanceof n;Promise.resolve(s?u.wrapped:u).then(function(e){if(s){a("next",e);return}o(i.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){o("throw",e)}}function o(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?a(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(o,i){var u={key:e,arg:n,resolve:o,reject:i,next:null};r?r=r.next=u:(t=r=u,a(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}r.d(t,{f:()=>u,S:()=>s}),"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};var o=r(65959),i=r(69152),u=function(e,t){return fetch(e,t).then(function(e){return e.body}).then(function(e){var t=null==e?void 0:e.getReader();return(0,i.V)(t,"missing stream body"),t})};function s(e){return c.apply(this,arguments)}function c(){var e;return e=function(e){var t,r,a,i,u,s,c,l,f,d,p,h,m;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=new TextDecoder,r="",o.label=1;case 1:return[4,new n(e.read())];case 2:if(i=(a=o.sent()).done,u=a.value,!i)return[3,5];if(!r)return[3,4];return[4,r];case 3:o.sent(),o.label=4;case 4:return[3,14];case 5:r+=t.decode(u,{stream:!0}),r=null!==(c=(s=r.split("\n")).pop())&&void 0!==c?c:"",l=!0,f=!1,d=void 0,o.label=6;case 6:o.trys.push([6,11,12,13]),p=s[Symbol.iterator](),o.label=7;case 7:if(l=(h=p.next()).done)return[3,10];return[4,h.value];case 8:o.sent(),o.label=9;case 9:return l=!0,[3,7];case 10:return[3,13];case 11:return m=o.sent(),f=!0,d=m,[3,13];case 12:try{l||null==p.return||p.return()}finally{if(f)throw d}return[7];case 13:return[3,1];case 14:return[2]}})},(c=function(){return new a(e.apply(this,arguments))}).apply(this,arguments)}},69152:(e,t,r)=>{r.d(t,{V:()=>n});function n(e,t){if(null==e)throw Error(t)}}}]);