"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{4849:function(r,e,n){function t(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=[],t=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);t=!0);}catch(c){a=!0,i=c}finally{try{t||null==u.return||u.return()}finally{if(a)throw i}}return n}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,{q:function(){return a}});var a=function(r){return function(e){var n=t(e,2),a=n[0],i=n[1];return["all",[">=",r,a],["<",r,i]]}}},7849:function(r,e,n){n.r(e),n.d(e,{getResources:function(){return b}});var t={};n.r(t),n.d(t,{getLevels:function(){return d},getLevelsByField:function(){return y},getLevelsSub500nm:function(){return v}});var a=n(4849);function i(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function o(r){return function(r){if(Array.isArray(r)){for(var e=0,n=new Array(r.length);e<r.length;e++)n[e]=r[e];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,c=["#6fc400","#feff00","#ffaa00","#ff5600","#991113","#4d0173","black"],l="pm_2_5",f="sub500nm",s=[0,.25,.5,1,2.5,5,20].map((function(r,e,n){return[r,n[e+1]||1/0]})),m=["get",l],p=["get",f],d=function(r){var e=r.isMinMaxDynamicRange,n=r.geojson,t=0,i=1/0,u=-1/0,f=!0,p=!1,d=void 0;try{for(var v,y=n.features[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){(t=v.value.properties.pm_2_5)>u&&(u=t),t<i&&(i=t)}}catch(w){p=!0,d=w}finally{try{f||null==y.return||y.return()}finally{if(p)throw d}}var h=c.length,g=e?(u-i)/h:0,b=e?o(new Array(h)).map((function(r,e){var n=i+e*g;return[n,n+g]})):s;return{circleCases:b.map((0,a.q)(m)).flatMap((function(r,e){return[r,c[e]]})),colors:c,fieldName:l,ranges:b}},v=function(r){var e=r.isMinMaxDynamicRange,n=r.geojson,t=0,i=1/0,u=-1/0,l=!0,m=!1,d=void 0;try{for(var v,y=n.features[Symbol.iterator]();!(l=(v=y.next()).done);l=!0){(t=v.value.properties.sub500nm)>u&&(u=t),t<i&&(i=t)}}catch(w){m=!0,d=w}finally{try{l||null==y.return||y.return()}finally{if(m)throw d}}var h=c.length,g=e?(u-i)/h:0,b=e?o(new Array(h)).map((function(r,e){var n=i+e*g;return[n,n+g]})):s;return{circleCases:b.map((0,a.q)(p)).flatMap((function(r,e){return[r,c[e]]})),colors:c,fieldName:f,ranges:b}},y=(i(u={},l,d),i(u,"sub500nm \u03bcg/m^3",v),u),h=n(7236);function g(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var b=function(){return function(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){g(r,e,n[e])}))}return r}({},{mapbox:t},{stream:h})}},7236:function(r,e,n){n.r(e),n.d(e,{parse:function(){return p}});var t=n(4235),a=n.n(t),i=n(6930);function o(r,e,n,t,a,i,o){try{var u=r[i](o),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function u(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=[],t=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);t=!0);}catch(c){a=!0,i=c}finally{try{t||null==u.return||u.return()}finally{if(a)throw i}}return n}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c,l=[6.842765,7.1751666,7.0114602,6.9088991,7.0263146,6.9180838,7.0393966,6.989318,6.9812267,5.2701795,14.0655402,13.8262107,14.1929174,14.0017841,13.8883794,13.9963284,14.0409634,14.2779903,13.8513492,13.898864,13.6873067,14.3390373,13.8184393,14.1478588,14.0655395,13.8262102,14.1929179,13.8296286,14.062005,13.9963317,14.040958,14.001345,13.96783,14,13.95533,14.00924,14,14,14,14,14],f=function(r,e,n){return 1800*(1e6*r/n*(Math.PI/6)*Math.pow(e/1e9,3))*1e9},s=function(r){return new Date(r.trim().split(" ").map((function(r,e){if(0===e){var n=u(r.split("/"),3),t=n[0],a=n[1],i=n[2],o=function(r){return 1===r.length?"0".concat(r):r};return"".concat(t,"-").concat(o(a),"-").concat(o(i))}return"T".concat(r,".000+01:00")})).join(""))},m=function(r){return parseFloat(r)},p=(c=a().mark((function r(e,n){var t,o,u,c,d,v,y;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=void 0===n?{records:[],partial:"",particleDiametersAscending:[]}:n,r.next=3,e.read();case 3:return o=r.sent,u=o.done,((c=o.value)||u)&&(t.partial+="string"===typeof c?c:c?(new TextDecoder).decode(c):"",d=t.partial.split(/\n/g),v=d.map((function(r){return r.trim()})).filter((function(r){return!!r})),y=v.length-1,v.forEach((function(r,e){if(y!==e||u){var n=r.includes(",")?r.split(","):r.split("\t");if(t.headerIndiciesByName){var a=n[t.headerIndiciesByName.Time],o=n[t.headerIndiciesByName["pm2.5 [ug/m3]"]];(0,i.k)(a,"date missing"),(0,i.k)(Number.isFinite(o),"column 'pm2.5 [ug/m3]' missing");for(var c=0,p=t.headerIndiciesByName["10.00 nm"],d=t.headerIndiciesByName["449.48 nm"],v=0,h=[],g=0;p<d;){var b,w=parseFloat(n[p]),A=(t.particleDiametersAscending[v]+t.particleDiametersAscending[v+1])/2;++g;var N=l[g],j=f(w,A,N);h.push({calibrationDivisor:N,diameterHeader:(null===(b=t.headerCells)||void 0===b?void 0:b[p])||"",diameterMidpointNm:A,"\u03bcg":j,numParticles:w}),c+=j,++v,++p}console.log({sampleNum:t.records.length,sub500nm:c,debug:h}),t.records.push({date:s(a),sub500nm:c,pm_2_5:m(o)}),u&&(t.partial="")}else t.headerCells=n,t.headerIndiciesByName=n.reduce((function(r,e,n){var a=e.trim();r[a]=n;var i=a.match(/\s*(\d+\.\d+)\s+nm/);return i&&t.particleDiametersAscending.push(parseInt(i[1],10)),r}),{})}else t.partial=r}))),r.abrupt("return",u?t:p(e,t));case 8:case"end":return r.stop()}}),r)})),function(){var r=this,e=arguments;return new Promise((function(n,t){var a=c.apply(r,e);function i(r){o(a,n,t,i,u,"next",r)}function u(r){o(a,n,t,i,u,"throw",r)}i(void 0)}))})},6930:function(r,e,n){function t(r,e){if(null===r||void 0===r)throw Error(e)}n.d(e,{k:function(){return t}})}}]);